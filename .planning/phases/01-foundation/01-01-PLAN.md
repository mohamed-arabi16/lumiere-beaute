---
phase: 01-foundation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - package.json
  - package-lock.json
  - vite.config.js
  - tsconfig.json
  - tsconfig.node.json
  - src/main.tsx
  - src/App.tsx
  - src/App.css
  - src/index.css
autonomous: true
requirements:
  - FNDTN-01
  - FNDTN-02
  - FNDTN-03
  - FNDTN-04
  - FNDTN-05

must_haves:
  truths:
    - "npm run dev starts without errors or warnings about missing plugins"
    - "TypeScript is configured and existing source files compile without type errors"
    - "Tailwind CSS processes utility classes (vite plugin active)"
    - "i18next, react-i18next, and i18next-browser-languagedetector are installed and importable"
  artifacts:
    - path: "vite.config.js"
      provides: "Tailwind v4 Vite plugin wired into build pipeline"
      contains: "tailwindcss()"
    - path: "tsconfig.json"
      provides: "TypeScript configuration for React SPA"
      contains: "jsx"
    - path: "package.json"
      provides: "All required dependencies installed"
      contains: "@tailwindcss/vite"
  key_links:
    - from: "vite.config.js"
      to: "@tailwindcss/vite"
      via: "import + plugins array"
      pattern: "import tailwindcss from.*@tailwindcss/vite"
    - from: "package.json"
      to: "node_modules/i18next"
      via: "npm install"
      pattern: "\"i18next\":"
---

<objective>
Bootstrap the project infrastructure: resolve the Vite 8 beta / @tailwindcss/vite peer-dep conflict by downgrading to Vite 7 stable, add TypeScript support, install the Tailwind v4 Vite plugin, install the i18n stack, and wire up the Tailwind plugin in vite.config.js.

Purpose: Every subsequent plan depends on Tailwind utility classes working and TypeScript types being available. Without this plan, Plan 02 (CSS system) and Plan 03 (providers) cannot function.

Output: A working Vite 7 + TypeScript project with @tailwindcss/vite active and i18n packages installed — ready for CSS token definitions and provider code.
</objective>

<execution_context>
@/Users/mohamedkhair/.claude/get-shit-done/workflows/execute-plan.md
@/Users/mohamedkhair/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-foundation/1-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Downgrade Vite 8 beta to Vite 7 stable and add TypeScript support</name>
  <files>package.json, tsconfig.json, tsconfig.node.json, src/main.tsx, src/App.tsx, src/App.css</files>
  <action>
**Critical:** @tailwindcss/vite@4.2.1 peer-requires vite@^5.2.0 || ^6 || ^7. The project currently has vite@8.0.0-beta.13 with an override. Must downgrade to Vite 7 stable before installing @tailwindcss/vite.

Step 1 — Uninstall beta Vite and reinstall Vite 7 stable:
```
npm uninstall vite
npm install -D vite@^7.0.0
```
Also remove the `"overrides": { "vite": "^8.0.0-beta.13" }` entry from package.json entirely, as it forces the beta version and would override our downgrade.

Step 2 — Add TypeScript support (project has @types/react + @types/react-dom already installed but no tsconfig):
```
npm install -D typescript@5
```
Create `tsconfig.json`:
```json
{
  "compilerOptions": {
    "target": "ES2020",
    "useDefineForClassFields": true,
    "lib": ["ES2020", "DOM", "DOM.Iterable"],
    "module": "ESNext",
    "skipLibCheck": true,
    "moduleResolution": "bundler",
    "allowImportingTsExtensions": true,
    "isolatedModules": true,
    "moduleDetection": "force",
    "noEmit": true,
    "jsx": "react-jsx",
    "strict": true,
    "noUnusedLocals": true,
    "noUnusedParameters": true,
    "noFallthroughCasesInSwitch": true
  },
  "include": ["src"]
}
```
Create `tsconfig.node.json`:
```json
{
  "compilerOptions": {
    "target": "ES2022",
    "lib": ["ES2023"],
    "module": "ESNext",
    "moduleResolution": "bundler",
    "allowSyntheticDefaultImports": true,
    "strict": true,
    "noEmit": true
  },
  "include": ["vite.config.js"]
}
```

Step 3 — Migrate existing source files to TypeScript:
- Rename `src/main.jsx` → `src/main.tsx` (update the script src in index.html to `/src/main.tsx`)
- Rename `src/App.jsx` → `src/App.tsx` — replace its content with a minimal placeholder:
```tsx
export default function App() {
  return <div className="min-h-screen">Loading...</div>;
}
```
- Delete `src/App.css` (Vite scaffold, not needed)
- Leave `src/index.css` in place for now (Plan 02 will replace its content)

The import in `src/main.tsx` should reference `./App.tsx` and `./index.css`.
  </action>
  <verify>
Run `npm run build` — should complete without Vite version errors. Run `npx tsc --noEmit` — should return exit 0 (no type errors). Check `node_modules/vite/package.json` version field shows 7.x.
  </verify>
  <done>
`npm run build` succeeds. `npx tsc --noEmit` exits 0. `node_modules/vite` is version 7.x (not 8 beta). `src/main.tsx` and `src/App.tsx` exist.
  </done>
</task>

<task type="auto">
  <name>Task 2: Install @tailwindcss/vite, i18n stack, and wire Tailwind into Vite config</name>
  <files>package.json, package-lock.json, vite.config.js</files>
  <action>
Step 1 — Install @tailwindcss/vite (must match tailwindcss version 4.2.1):
```
npm install -D @tailwindcss/vite@4.2.1
```
Verify tailwindcss@4.2.1 is already in devDependencies (it is per package.json). Both must be at the same 4.x version.

Step 2 — Install i18n stack:
```
npm install i18next@25 react-i18next@16 i18next-browser-languagedetector@8
```
These exact major versions are required for peer compatibility: i18next v25 is the peer for react-i18next v16.

Step 3 — Update `vite.config.js` to add the Tailwind plugin. Do NOT convert to .ts (no tsconfig.node.json change needed for JS config file):
```js
import { defineConfig } from 'vite'
import react from '@vitejs/plugin-react'
import tailwindcss from '@tailwindcss/vite'

export default defineConfig({
  plugins: [
    react(),
    tailwindcss(),
  ],
})
```

Do NOT create `postcss.config.js` — the Vite plugin replaces the PostCSS approach for Tailwind v4.
  </action>
  <verify>
Run `npm run dev` — dev server starts without errors. In the running dev server, create a test element with class `bg-red-500` in App.tsx, open browser — if it has a red background, Tailwind is processing. Then remove the test. Also verify: `node_modules/@tailwindcss/vite` exists, `node_modules/i18next` exists, `node_modules/react-i18next` exists.
  </verify>
  <done>
`npm run dev` starts without errors. `node_modules/@tailwindcss/vite/package.json` shows version 4.2.1. `node_modules/i18next` exists. `node_modules/react-i18next` exists. `vite.config.js` contains `tailwindcss()` in plugins array.
  </done>
</task>

</tasks>

<verification>
1. `npm run build` exits 0
2. `npx tsc --noEmit` exits 0
3. `node_modules/vite/package.json` version is 7.x
4. `node_modules/@tailwindcss/vite/package.json` version is 4.2.1
5. `node_modules/i18next` exists
6. `node_modules/react-i18next` exists
7. `node_modules/i18next-browser-languagedetector` exists
8. `vite.config.js` contains import from `@tailwindcss/vite` and `tailwindcss()` in plugins
9. `tsconfig.json` exists with `"jsx": "react-jsx"`
10. `src/main.tsx` exists (was main.jsx)
</verification>

<success_criteria>
The project infrastructure is stable: Vite 7 stable + TypeScript configured + Tailwind v4 Vite plugin active + i18n packages installed. `npm run dev` and `npm run build` both succeed. Plans 02 and 03 can execute in parallel after this plan completes.
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation/01-01-SUMMARY.md`
</output>
