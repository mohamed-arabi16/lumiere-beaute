---
phase: 01-foundation
plan: 02
type: execute
wave: 2
depends_on:
  - "01-01"
files_modified:
  - src/styles/globals.css
  - src/index.css
  - index.html
autonomous: true
requirements:
  - FNDTN-01
  - FNDTN-02
  - FNDTN-08
  - FNDTN-09

must_haves:
  truths:
    - "All 10 brand teal color utility classes (bg-celadon-100 through bg-stormy-teal-950) produce visible colored elements"
    - "Dark mode activates when 'dark' class is present on <html> — background switches from warm ivory to forest-at-dusk teal"
    - "Cormorant Garamond renders for elements with font-display class; Inter renders for font-body class"
    - "CSS gradient placeholders render as colored gradients (not broken/blank boxes)"
    - "Page reload with 'dark' in localStorage shows dark background instantly, no flash of ivory"
    - "Page reload with lang='ar' in localStorage sets dir='rtl' on <html> before first paint"
  artifacts:
    - path: "src/styles/globals.css"
      provides: "Tailwind base import, @theme color tokens, @custom-variant dark, typography, gradient placeholders"
      contains: "@import \"tailwindcss\""
    - path: "index.html"
      provides: "Blocking FOUC prevention script, Google Fonts preconnect and stylesheet links"
      contains: "localStorage.getItem('theme')"
  key_links:
    - from: "src/styles/globals.css"
      to: "Tailwind CSS engine"
      via: "@import tailwindcss directive"
      pattern: "@import \"tailwindcss\""
    - from: "src/styles/globals.css"
      to: "HTML dark class"
      via: "@custom-variant dark selector"
      pattern: "@custom-variant dark"
    - from: "index.html blocking script"
      to: "document.documentElement"
      via: "synchronous localStorage read before paint"
      pattern: "classList.add.*dark"
---

<objective>
Create the complete CSS foundation: all 10 brand color tokens via Tailwind v4 @theme, dark mode custom variant, brand typography declarations, Arabic font override rules, and the CSS gradient placeholder system. Also update index.html with the blocking FOUC-prevention script and Google Fonts loading.

Purpose: This is the visual foundation every component in Phases 2-6 builds on. Color tokens, dark mode, and fonts must be correct from the first JSX element written. The blocking script in index.html prevents flash of wrong theme/direction on page reload — critical for brand trust.

Output: `src/styles/globals.css` (full CSS system), updated `src/index.css` (imports globals), updated `index.html` (blocking script + Google Fonts).
</objective>

<execution_context>
@/Users/mohamedkhair/.claude/get-shit-done/workflows/execute-plan.md
@/Users/mohamedkhair/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-foundation/1-RESEARCH.md
@.planning/phases/01-foundation/01-01-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create complete CSS system in src/styles/globals.css</name>
  <files>src/styles/globals.css, src/index.css</files>
  <action>
Create `src/styles/` directory and write `src/styles/globals.css` with the full CSS system. This file replaces the Vite scaffold CSS entirely.

The file must contain in this exact order:

**1. Tailwind base import:**
```css
@import "tailwindcss";
```

**2. @theme block with all 10 color tokens + semantic surfaces + typography:**
```css
@theme {
  /* 10 brand teal-green colors (light to dark) */
  --color-celadon-100: #99e2b4;
  --color-celadon-200: #88d4ab;
  --color-mint-leaf-300: #78c6a3;
  --color-mint-leaf-400: #67b99a;
  --color-seagrass-500: #56ab91;
  --color-seagrass-600: #469d89;
  --color-jungle-teal-700: #358f80;
  --color-blue-spruce-800: #248277;
  --color-deep-ocean-900: #14746f;
  --color-stormy-teal-950: #036666;

  /* Semantic surface colors */
  --color-surface-ivory: #F4FAF7;
  --color-surface-dark: #082F2D;
  --color-surface-dark-card: #0C4744;

  /* Typography */
  --font-display: "Cormorant Garamond", Georgia, serif;
  --font-body: "Inter", system-ui, -apple-system, sans-serif;
  --font-arabic: "Noto Sans Arabic", "Cairo", sans-serif;
}
```

**3. Class-based dark mode custom variant:**
```css
@custom-variant dark (&:where(.dark, .dark *));
```

**4. Global base styles:**
```css
html {
  background-color: var(--color-surface-ivory);
  color: #1a1a1a;
}
html.dark {
  background-color: var(--color-surface-dark);
  color: var(--color-celadon-100);
}
body {
  margin: 0;
  font-family: var(--font-body);
  font-size: 1rem;
  line-height: 1.6;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}
```

**5. Arabic language overrides (Pitfall 5 prevention — Cormorant Garamond has no Arabic glyphs):**
```css
:lang(ar) {
  font-family: var(--font-arabic);
  font-size: 1.2em;
  line-height: 1.8;
}
:lang(ar) h1,
:lang(ar) h2,
:lang(ar) h3,
:lang(ar) h4 {
  font-family: var(--font-arabic);
  font-weight: 600;
  letter-spacing: 0;
}
```

**6. CSS gradient placeholder classes (FNDTN-09 — all image slots use these):**
```css
.placeholder-gradient-primary {
  background-image: linear-gradient(
    135deg,
    var(--color-seagrass-500) 0%,
    var(--color-deep-ocean-900) 100%
  );
}
.placeholder-gradient-card {
  background-image: linear-gradient(
    160deg,
    var(--color-mint-leaf-300) 0%,
    var(--color-jungle-teal-700) 60%,
    var(--color-stormy-teal-950) 100%
  );
}
.placeholder-gradient-hero {
  background-image: linear-gradient(
    180deg,
    var(--color-celadon-100) 0%,
    var(--color-seagrass-600) 50%,
    var(--color-deep-ocean-900) 100%
  );
}
.placeholder-aspect-hero {
  aspect-ratio: 16 / 9;
  min-height: 400px;
}
.placeholder-aspect-card {
  aspect-ratio: 4 / 3;
}
.placeholder-aspect-portrait {
  aspect-ratio: 3 / 4;
}
```

Then update `src/index.css` to only contain:
```css
@import "./styles/globals.css";
```
(The main.tsx already imports `./index.css` — this keeps the import chain intact.)
  </action>
  <verify>
Run `npm run dev`. Open the browser. In DevTools Elements panel, inspect the `<html>` element's computed styles — `--color-celadon-100` should resolve to `#99e2b4`. In DevTools Sources, check the generated CSS output includes `bg-celadon-100`, `text-seagrass-500` etc. as valid classes. Add `<div className="bg-celadon-100 w-20 h-20" />` temporarily to App.tsx — it should render as a colored box.
  </verify>
  <done>
`npm run dev` starts without errors. DevTools confirms CSS custom properties from @theme are present. All 10 color utility classes (bg-celadon-100 through bg-stormy-teal-950) generate colored backgrounds when applied. `font-display` applies Cormorant Garamond, `font-body` applies Inter. `.placeholder-gradient-hero` applied to a div renders a teal gradient.
  </done>
</task>

<task type="auto">
  <name>Task 2: Update index.html with blocking FOUC script and Google Fonts</name>
  <files>index.html</files>
  <action>
Replace the entire content of `index.html`. This is the most critical file for preventing flash of wrong theme/direction on page reload (FNDTN-02, FNDTN-04).

The blocking inline `<script>` MUST appear in `<head>` BEFORE any `<link>` stylesheet. It runs synchronously during HTML parse — before React mounts, before CSS loads — and sets the correct dark class and dir/lang attributes on `<html>` based on stored preferences.

Write `index.html` as:
```html
<!doctype html>
<html lang="tr">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- BLOCKING: runs synchronously before CSS paints to prevent FOUC -->
    <!-- Must be FIRST in <head> before any stylesheet link -->
    <script>
      (function() {
        // Restore dark/light mode from localStorage or fall back to system preference
        var saved = localStorage.getItem('theme');
        if (saved === 'dark' || (!saved && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
          document.documentElement.classList.add('dark');
        }

        // Restore language + direction from localStorage; fallback to Turkish
        var lang = localStorage.getItem('i18nextLng') || 'tr';
        var supported = ['tr', 'en', 'ar'];
        // Normalize locale variants like 'ar-SA' → 'ar', 'en-US' → 'en'
        if (supported.indexOf(lang) === -1) {
          var base = lang.split('-')[0];
          lang = supported.indexOf(base) !== -1 ? base : 'tr';
        }
        document.documentElement.lang = lang;
        document.documentElement.dir = (lang === 'ar') ? 'rtl' : 'ltr';
      })();
    </script>

    <!-- Google Fonts: preconnect for performance, then font stylesheet -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,600;1,300;1,400&family=Inter:wght@400;500&family=Noto+Sans+Arabic:wght@400;500&display=swap"
      rel="stylesheet"
    />

    <title>Lumiere Beaute</title>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
```

Note: `lang="tr"` is the default on `<html>` — the blocking script immediately overrides it if localStorage has a different saved language. The module src references `main.tsx` (the renamed TypeScript file from Plan 01).
  </action>
  <verify>
1. Open the app in a browser. In DevTools Application > Local Storage, set `theme` = `dark` and `i18nextLng` = `ar`. Hard reload (Cmd+Shift+R or Ctrl+Shift+R). The `<html>` element should immediately have `class="dark"`, `lang="ar"`, and `dir="rtl"` visible in DevTools Elements — before any JavaScript module loads.
2. Clear localStorage and reload — `<html>` should have `lang="tr"`, `dir="ltr"`, no dark class (unless system is in dark mode).
3. Google Fonts link should be visible in Network tab, loading Cormorant Garamond, Inter, and Noto Sans Arabic.
  </verify>
  <done>
index.html contains the blocking script before any stylesheet link. Setting `theme=dark` + `i18nextLng=ar` in localStorage and hard-reloading shows `class="dark" lang="ar" dir="rtl"` on `<html>` with zero flash. Google Fonts loads the three font families. `src/main.tsx` is referenced in the module script tag.
  </done>
</task>

</tasks>

<verification>
1. `npm run dev` runs without CSS errors
2. DevTools: `<html>` computed styles show `--color-celadon-100` = `#99e2b4`
3. Tailwind utility `bg-celadon-100` produces a visible colored element
4. `dark:` classes activate when `dark` is added to `<html>` class
5. `.placeholder-gradient-hero` renders a teal-to-dark gradient
6. Google Fonts Network request loads Cormorant Garamond, Inter, Noto Sans Arabic
7. Hard reload with `theme=dark` in localStorage shows dark background instantly (no flash)
8. Hard reload with `i18nextLng=ar` in localStorage shows `dir="rtl"` on `<html>` instantly
</verification>

<success_criteria>
The full visual and theming CSS system is operational. All 10 brand color tokens generate Tailwind utility classes. Dark mode toggles instantly via the `dark` HTML class. Fonts are loaded. Gradient placeholder classes are available. Flash of wrong theme/direction is impossible on page reload.
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation/01-02-SUMMARY.md`
</output>
