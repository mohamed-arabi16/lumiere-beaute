---
phase: 02-shell
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/navigation/Navbar.tsx
  - src/components/navigation/LanguageSwitcher.tsx
  - src/components/navigation/ThemeToggle.tsx
  - src/components/navigation/MobileMenu.tsx
autonomous: true
requirements:
  - NAV-01
  - NAV-02
  - FNDTN-07

must_haves:
  truths:
    - "Navbar renders sticky at the top with glass backdrop-blur on all pages"
    - "Desktop nav shows 5 links with active state highlighting current route"
    - "Language switcher cycles between TR / EN / AR calling i18n.changeLanguage"
    - "Theme toggle calls toggleTheme from useTheme hook"
    - "On mobile viewport (md breakpoint), nav links hide and hamburger button appears"
    - "Hamburger tap opens a slide-out overlay panel with animated entry and exit"
    - "Tapping a mobile nav link closes the menu and navigates to the route"
    - "All spacing uses Tailwind logical properties (ms-, me-, ps-, pe-) — no ml-/mr- ever"
  artifacts:
    - path: "src/components/navigation/Navbar.tsx"
      provides: "Sticky header with desktop links, LanguageSwitcher, ThemeToggle, hamburger trigger"
      exports: ["Navbar"]
    - path: "src/components/navigation/LanguageSwitcher.tsx"
      provides: "TR/EN/AR button group calling i18n.changeLanguage"
      exports: ["LanguageSwitcher"]
    - path: "src/components/navigation/ThemeToggle.tsx"
      provides: "Icon button that calls toggleTheme, renders sun/moon based on current theme"
      exports: ["ThemeToggle"]
    - path: "src/components/navigation/MobileMenu.tsx"
      provides: "AnimatePresence-wrapped slide-out panel with backdrop and 5 nav links"
      exports: ["MobileMenu"]
  key_links:
    - from: "src/components/navigation/Navbar.tsx"
      to: "src/components/navigation/MobileMenu.tsx"
      via: "isOpen state prop + onClose callback"
      pattern: "MobileMenu.*isOpen"
    - from: "src/components/navigation/LanguageSwitcher.tsx"
      to: "i18n.changeLanguage"
      via: "useTranslation hook"
      pattern: "changeLanguage"
    - from: "src/components/navigation/ThemeToggle.tsx"
      to: "useTheme"
      via: "hook import"
      pattern: "toggleTheme"
    - from: "src/components/navigation/MobileMenu.tsx"
      to: "AnimatePresence"
      via: "framer-motion import"
      pattern: "AnimatePresence"
---

<objective>
Build all four navigation components — Navbar, LanguageSwitcher, ThemeToggle, MobileMenu — that together deliver a fully functional, RTL-aware, responsive navigation system.

Purpose: These components are consumed by RootLayout (Plan 03). Building them in Wave 1 (parallel with Plan 01 infrastructure) lets Plan 03 simply import and assemble. The navigation is the primary UX touchpoint for language switching, theme toggling, and mobile access.
Output: Four navigation component files ready for RootLayout assembly.
</objective>

<execution_context>
@/Users/mohamedkhair/.claude/get-shit-done/workflows/execute-plan.md
@/Users/mohamedkhair/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/STATE.md
@.planning/phases/02-shell/2-RESEARCH.md
@src/hooks/useDirection.ts
@src/hooks/useTheme.ts
@src/i18n/locales/en/common.json
</context>

<tasks>

<task type="auto">
  <name>Task 1: Build LanguageSwitcher and ThemeToggle</name>
  <files>src/components/navigation/LanguageSwitcher.tsx, src/components/navigation/ThemeToggle.tsx</files>
  <action>
    Create src/components/navigation/LanguageSwitcher.tsx:
    - Import useTranslation from 'react-i18next'
    - Render three buttons: TR | EN | ع (Arabic abbreviation)
    - Languages array: [{ code: 'tr', label: 'TR' }, { code: 'en', label: 'EN' }, { code: 'ar', label: 'ع' }]
    - Each button calls i18n.changeLanguage(code) on click
    - Active language (i18n.language === code) gets distinct styling: text-stormy-teal-950 dark:text-celadon-100 font-medium
    - Inactive: text-seagrass-600 dark:text-seagrass-400 hover:text-stormy-teal-950 dark:hover:text-celadon-100
    - Buttons separated by border-s-[1px] border-seagrass-500/30 (logical property)
    - No ml-/mr-/pl-/pr- — use ms-, me-, ps-, pe- exclusively
    - Font size: text-xs font-body tracking-wide uppercase
    - Container: flex items-center gap-0 (borders provide visual separation)
    - aria-label on each button: "Switch to [language name]" for accessibility

    Create src/components/navigation/ThemeToggle.tsx:
    - Import useTheme from '../../hooks/useTheme'
    - Render a button that calls toggleTheme() on click
    - When theme is 'light': show a moon SVG icon (switch to dark)
    - When theme is 'dark': show a sun SVG icon (switch to light)
    - Use inline SVG (no icon library) — simple geometric SVG paths:
      Sun: circle (cx=12 cy=12 r=5) + 8 lines radiating at 45° increments
      Moon: crescent path using two overlapping circles rendered as a path
    - SVG size: w-5 h-5, stroke-based (stroke="currentColor" strokeWidth="1.5" fill="none")
    - Button classes: p-2 rounded-md text-seagrass-600 dark:text-seagrass-400 hover:text-stormy-teal-950 dark:hover:text-celadon-100 transition-colors duration-200
    - aria-label="Toggle theme" for accessibility
    - Do NOT use any icon package — inline SVG only
  </action>
  <verify>Run `npx tsc --noEmit` — no TypeScript errors on the two new files.</verify>
  <done>LanguageSwitcher.tsx renders TR/EN/ع buttons that call i18n.changeLanguage. ThemeToggle.tsx renders sun/moon button that calls toggleTheme. Both compile clean.</done>
</task>

<task type="auto">
  <name>Task 2: Build Navbar and MobileMenu</name>
  <files>src/components/navigation/Navbar.tsx, src/components/navigation/MobileMenu.tsx</files>
  <action>
    Create src/components/navigation/MobileMenu.tsx:
    - Import AnimatePresence, motion from 'framer-motion'
    - Import NavLink from 'react-router-dom'
    - Import useTranslation from 'react-i18next'
    - Props interface: { isOpen: boolean; onClose: () => void; navLinks: Array<{ key: string; to: string }> }

    Variants:
    - overlayVariants: { hidden: { opacity: 0 }, visible: { opacity: 1, transition: { duration: 0.25 } }, exit: { opacity: 0, transition: { duration: 0.2 } } }
    - menuVariantsLTR: { hidden: { x: '100%' }, visible: { x: 0, transition: { duration: 0.35, ease: [0.22, 1, 0.36, 1] } }, exit: { x: '100%', transition: { duration: 0.25, ease: [0.22, 1, 0.36, 1] } } }
    - menuVariantsRTL: { hidden: { x: '-100%' }, visible: { x: 0, transition: same }, exit: { x: '-100%', transition: same } }

    Render (inside AnimatePresence):
    - When isOpen is true, render two motion.div siblings inside a React Fragment:
      1. Backdrop: motion.div key="mobile-backdrop" with overlayVariants, className="fixed inset-0 z-40 bg-stormy-teal-950/60 backdrop-blur-sm", onClick={onClose}
      2. Panel: motion.div key="mobile-panel", variants depend on i18n.dir() === 'rtl', className="fixed top-0 end-0 z-50 h-full w-80 bg-surface-ivory dark:bg-surface-dark flex flex-col pt-20 ps-8 pe-8"
    - Inside panel: close button (absolute top-4 end-4), then nav with 6rem gap between links
    - Each NavLink: onClick={onClose}, font-display text-2xl text-stormy-teal-950 dark:text-celadon-100
    - Use end-0 (logical property) for panel positioning — slides from inline-end side automatically
    - RTL note: panel uses end-0 (correct side) but x animation must be manually flipped per i18n.dir()

    Create src/components/navigation/Navbar.tsx:
    - Import NavLink from 'react-router-dom'
    - Import useTranslation from 'react-i18next'
    - Import useDirection from '../../hooks/useDirection'
    - Import useState from 'react'
    - Import LanguageSwitcher, ThemeToggle, MobileMenu from same directory
    - NAV_LINKS constant (defined outside component, not inside):
      [{ key: 'nav.home', to: '/' }, { key: 'nav.services', to: '/services' }, { key: 'nav.academy', to: '/academy' }, { key: 'nav.about', to: '/about' }, { key: 'nav.contact', to: '/contact' }]

    Navbar structure:
    ```
    <header className="sticky top-0 z-50 w-full border-b border-seagrass-500/20 bg-surface-ivory/80 dark:bg-surface-dark/80 backdrop-blur-md transition-colors duration-300">
      <nav className="mx-auto flex max-w-7xl items-center justify-between px-4 py-4 sm:px-6 lg:px-8">
        Logo span (font-display text-xl text-stormy-teal-950 dark:text-celadon-100)
        Desktop ul (hidden md:flex items-center gap-6 list-none m-0 p-0)
          Each NavLink with isActive className toggle
        Controls div (flex items-center gap-3):
          <LanguageSwitcher />
          <ThemeToggle />
          Hamburger button (md:hidden, onClick={() => setIsOpen(true)})
      </nav>
      <MobileMenu isOpen={isOpen} onClose={() => setIsOpen(false)} navLinks={NAV_LINKS} />
    </header>
    ```

    NavLink active classes:
    - Active: text-stormy-teal-950 dark:text-celadon-100 font-medium
    - Inactive: text-seagrass-600 dark:text-seagrass-400 hover:text-stormy-teal-950 dark:hover:text-celadon-100 transition-colors duration-200
    - Font: font-body text-sm

    Hamburger button (inline SVG, 3 bars):
    - 3 x <span className="block w-5 h-0.5 bg-current mb-1 last:mb-0"> (no mb-1 on last)
    - aria-label="Open menu"

    CRITICAL: MobileMenu is rendered INSIDE <header> but OUTSIDE <nav> — this ensures it overlays
    the full screen correctly. AnimatePresence is inside MobileMenu (not in Navbar).

    CRITICAL: No ml-/mr-/pl-/pr- anywhere. All inline-axis spacing uses ms-/me-/ps-/pe-.
  </action>
  <verify>Run `npx tsc --noEmit` — no TypeScript errors. All four navigation files exist and compile.</verify>
  <done>Navbar.tsx renders sticky header with desktop links, LanguageSwitcher, ThemeToggle, and hamburger trigger. MobileMenu.tsx renders AnimatePresence-wrapped slide-out panel. All four navigation files compile clean. No physical directional Tailwind classes used.</done>
</task>

</tasks>

<verification>
- `npx tsc --noEmit` passes with zero errors across all 4 navigation files
- Navbar.tsx: sticky, backdrop-blur-md, max-w-7xl, uses NavLink with isActive styling
- LanguageSwitcher.tsx: 3 buttons (TR, EN, ع), calls i18n.changeLanguage on click
- ThemeToggle.tsx: inline SVG sun/moon, calls toggleTheme on click
- MobileMenu.tsx: AnimatePresence wrapping backdrop + slide-out panel, navLinks prop, RTL-aware x variants
- No ml-/mr-/pl-/pr- in any file — only ms-/me-/ps-/pe-/start-/end-
</verification>

<success_criteria>
All four navigation components exist and TypeScript-compile. Navbar renders sticky header with desktop links and mobile hamburger. MobileMenu uses AnimatePresence for animated entry/exit. LanguageSwitcher calls i18n.changeLanguage. ThemeToggle calls toggleTheme.
</success_criteria>

<output>
After completion, create `.planning/phases/02-shell/02-02-SUMMARY.md`
</output>
