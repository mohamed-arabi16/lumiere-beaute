---
phase: 02-shell
plan: 04
type: execute
wave: 3
depends_on:
  - "02-03"
files_modified: []
autonomous: false
requirements:
  - FNDTN-06
  - FNDTN-07
  - NAV-01
  - NAV-02

must_haves:
  truths:
    - "User sees cinematic page transition (enter + exit animation) when navigating between pages"
    - "Navbar is visible and sticky at all scroll positions on all five pages"
    - "Navbar shows language switcher and theme toggle that both work correctly"
    - "On 390px mobile viewport the hamburger appears and opens an animated overlay menu"
    - "All five routes are accessible with correct content"
    - "No horizontal scroll at any viewport from 390px to 1440px"
  artifacts:
    - path: "src/layouts/RootLayout.tsx"
      provides: "Live shell with Navbar + AnimatedOutlet"
    - path: "src/layouts/AnimatedOutlet.tsx"
      provides: "Cinematic page transitions"
    - path: "src/components/navigation/Navbar.tsx"
      provides: "Sticky responsive navbar"
    - path: "src/components/navigation/MobileMenu.tsx"
      provides: "Animated hamburger overlay"
  key_links:
    - from: "user action: click nav link"
      to: "animated page transition"
      via: "AnimatePresence mode='wait'"
      pattern: "mode.*wait"
    - from: "user action: click hamburger"
      to: "MobileMenu overlay appears"
      via: "AnimatePresence in MobileMenu"
      pattern: "AnimatePresence"
---

<objective>
Human verification of the complete Phase 2 shell — confirm all four success criteria are met visually and interactively before Phase 2 is marked complete.

Purpose: Phase 2 success depends on observable behaviors that automated TypeScript checks cannot verify — animation quality, responsive layout correctness, RTL direction, and interactive feel. This checkpoint captures user confirmation.
Output: Human approval that Phase 2 shell meets all success criteria.
</objective>

<execution_context>
@/Users/mohamedkhair/.claude/get-shit-done/workflows/execute-plan.md
@/Users/mohamedkhair/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Run dev server and prepare verification</name>
  <files></files>
  <action>
    Run `npm run dev` from the project root.
    Confirm the dev server starts successfully and outputs a local URL (typically http://localhost:5173/).
    Open the URL in a browser.
    Report the dev server URL so the user can begin verification.
  </action>
  <verify>Dev server starts without errors. Browser opens to the application showing Navbar + Home stub page.</verify>
  <done>Dev server running. Application accessible in browser. No console errors.</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Task 2: Human verify Phase 2 shell</name>
  <files></files>
  <action>
    Pause for human verification of the complete Phase 2 shell against all four success criteria.
    Present the how-to-verify steps and wait for user confirmation before continuing.
  </action>
  <verify>Human types "approved" confirming all four Phase 2 success criteria pass.</verify>
  <done>Human confirms: cinematic transitions, sticky navbar with controls, mobile hamburger menu, no horizontal scroll at any viewport.</done>
  <what-built>
    Complete Phase 2 application shell:
    - BrowserRouter routing with 5 pages (Home, Services, Academy, About, Contact)
    - AnimatedOutlet with AnimatePresence mode="wait" for cinematic page transitions
    - RTL-aware slide+fade variants from src/animations/variants.ts
    - Sticky Navbar with backdrop-blur, NavLink active states
    - LanguageSwitcher (TR/EN/ع) + ThemeToggle (sun/moon inline SVG)
    - MobileMenu AnimatePresence slide-out overlay
    - ScrollRestoration on route change
    - vercel.json with SPA catch-all rewrite
  </what-built>
  <how-to-verify>
    With the dev server running at http://localhost:5173/, verify all four Phase 2 success criteria:

    **Criterion 1 — Cinematic page transitions:**
    1. Click "Services" in the navbar — confirm a slide+fade animation plays as Services page enters
    2. Click "Academy" — confirm Services exit animation plays before Academy enters
    3. Click browser back button — confirm reverse navigation also animates
    Expected: Each navigation shows a smooth 0.45s enter / 0.3s exit slide+fade with no flash or jump

    **Criterion 2 — Sticky Navbar on all pages:**
    1. On each of the 5 pages, scroll down (if content is short, resize browser taller)
    2. Confirm Navbar stays fixed at the top with glass blur backdrop visible
    3. Confirm LanguageSwitcher (TR/EN/ع) and ThemeToggle (icon button) are present and clickable
    4. Click TR / EN / ع — confirm language labels in nav links update
    5. Click ThemeToggle — confirm dark/light mode switches and preference persists on reload

    **Criterion 3 — Mobile hamburger menu (390px viewport):**
    1. Open browser DevTools → set device to iPhone SE or manually set viewport to 390px wide
    2. Confirm desktop nav links disappear and hamburger icon appears
    3. Tap hamburger — confirm full-screen overlay panel slides in with animation
    4. Tap a nav link inside the menu — confirm menu closes with animation AND page navigates
    5. Confirm close button (✕) in the panel also closes the menu with animation

    **Criterion 4 — No horizontal scroll (390px to 1440px):**
    1. At 390px width: confirm no horizontal scrollbar appears on any page
    2. Resize to 768px, 1024px, 1440px: confirm layout flows correctly at all widths
    3. Check each of the 5 pages for overflow

    **Bonus — RTL direction:**
    1. Switch language to Arabic (ع button)
    2. Confirm page layout switches to RTL (text aligns right, nav items mirror)
    3. Navigate to another page — confirm transition animation slides from the opposite side
  </how-to-verify>
  <resume-signal>Type "approved" if all four criteria pass, or describe which criterion failed and what you observed.</resume-signal>
</task>

</tasks>

<verification>
Phase 2 is complete when the human verifies:
- Cinematic transitions visible on every navigation
- Navbar sticky, language switcher and theme toggle functional
- Mobile hamburger opens animated overlay, links close menu on tap
- No horizontal scroll from 390px to 1440px
</verification>

<success_criteria>
Human confirms all four Phase 2 success criteria from ROADMAP.md are met. STATE.md is updated to reflect Phase 2 complete.
</success_criteria>

<output>
After completion, create `.planning/phases/02-shell/02-04-SUMMARY.md`
</output>
