---
phase: 04-homepage-and-services
plan: "02"
type: execute
wave: 2
depends_on:
  - "04-01"
files_modified:
  - src/components/sections/HeroSection.tsx
  - src/components/sections/StatsSection.tsx
autonomous: true
requirements:
  - HOME-01
  - HOME-02

must_haves:
  truths:
    - "The hero section fills the full viewport (min-h-screen), displays the TypewriterText headline animation immediately on mount, shows a subtitle and two CTA buttons, and its gradient background visually shifts (parallax) when the user scrolls down"
    - "When the stats section scrolls into view, each number counts up from 0 to its target value with a 2-second luxury easing animation, and the count-up fires only once (once: true)"
    - "Both sections respect prefers-reduced-motion — hero background stays static, counters start at final value immediately (handled by MotionConfig reducedMotion='user' already in AppProviders)"
  artifacts:
    - path: "src/components/sections/HeroSection.tsx"
      provides: "Full-viewport hero with parallax gradient, TypewriterText headline, subtitle, and two CTAs"
      exports: ["HeroSection"]
    - path: "src/components/sections/StatsSection.tsx"
      provides: "Three animated counting statistics that trigger on scroll"
      exports: ["StatsSection"]
  key_links:
    - from: "src/components/sections/HeroSection.tsx"
      to: "src/components/animations/TypewriterText.tsx"
      via: "import { TypewriterText } from '../animations/TypewriterText'"
      pattern: "TypewriterText"
    - from: "src/components/sections/HeroSection.tsx"
      to: "framer-motion useScroll + useTransform"
      via: "const { scrollYProgress } = useScroll({ target: sectionRef, offset: ['start start', 'end start'] })"
      pattern: "useScroll|useTransform"
    - from: "src/components/sections/StatsSection.tsx"
      to: "src/types/content.ts"
      via: "import type { StatItem } from '../../types/content'"
      pattern: "StatItem"
    - from: "src/components/sections/StatsSection.tsx"
      to: "framer-motion animate + useInView"
      via: "const isInView = useInView(ref, { once: true, amount: 0.5 })"
      pattern: "useInView|animate\\(0"
---

<objective>
Build HeroSection (full-viewport parallax hero with TypewriterText headline and CTA buttons) and StatsSection (animated count-up statistics triggered on scroll).

Purpose: These are the top two above-the-fold and first-scroll experiences — they set the cinematic brand tone. Building them as isolated section components keeps HomePage.tsx clean and each section independently testable.

Output: src/components/sections/HeroSection.tsx, src/components/sections/StatsSection.tsx
</objective>

<execution_context>
@/Users/mohamedkhair/.claude/get-shit-done/workflows/execute-plan.md
@/Users/mohamedkhair/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/04-homepage-and-services/04-RESEARCH.md
@.planning/phases/04-homepage-and-services/04-01-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Build HeroSection with parallax gradient and TypewriterText</name>
  <files>src/components/sections/HeroSection.tsx</files>
  <action>
Create src/components/sections/ directory and HeroSection.tsx.

**Imports (all from framer-motion, NOT motion/react — locked project decision):**
```typescript
import { motion, useScroll, useTransform, useReducedMotion } from 'framer-motion';
import { useRef } from 'react';
import { useTranslation } from 'react-i18next';
import { Link } from 'react-router-dom';
import { TypewriterText } from '../animations/TypewriterText';
import { Button } from '../ui/Button';
import { BodyText } from '../ui/Typography';
```

**Parallax implementation:**
- `const sectionRef = useRef<HTMLElement>(null)` — typed HTMLElement
- `const shouldReduceMotion = useReducedMotion()` — override parallax when reduced motion is preferred
- `const { scrollYProgress } = useScroll({ target: sectionRef, offset: ['start start', 'end start'] })` — tracks hero scroll progress from 0 (top at viewport top) to 1 (bottom at viewport top)
- `const backgroundY = useTransform(scrollYProgress, [0, 1], ['0%', '20%'])` — subtle 20% shift (research: too aggressive causes background to disappear)
- Apply as: `style={{ backgroundPositionY: shouldReduceMotion ? '0%' : backgroundY }}` on the motion.section

**Component structure:**
```tsx
export function HeroSection() {
  const { t } = useTranslation('common');
  const sectionRef = useRef<HTMLElement>(null);
  const shouldReduceMotion = useReducedMotion();
  const { scrollYProgress } = useScroll({
    target: sectionRef,
    offset: ['start start', 'end start'],
  });
  const backgroundY = useTransform(scrollYProgress, [0, 1], ['0%', '20%']);

  return (
    <motion.section
      ref={sectionRef}
      style={{ backgroundPositionY: shouldReduceMotion ? '0%' : backgroundY }}
      className="relative min-h-screen flex flex-col items-center justify-center
                 placeholder-gradient-hero overflow-hidden px-6 text-center"
    >
      <div className="relative z-10 flex flex-col items-center gap-6 max-w-3xl">
        <TypewriterText
          text={t('home.hero.headline')}
          as="h1"
          className="font-display text-5xl md:text-7xl text-stormy-teal-950 dark:text-celadon-100"
        />
        <BodyText
          size="lg"
          className="text-jungle-teal-700 dark:text-mint-leaf-300 max-w-xl"
        >
          {t('home.hero.subtitle')}
        </BodyText>
        <div className="flex gap-4 flex-wrap justify-center">
          <Link to="/services">
            <Button variant="primary">{t('home.hero.cta_primary')}</Button>
          </Link>
          <Link to="/services">
            <Button variant="ghost">{t('home.hero.cta_secondary')}</Button>
          </Link>
        </div>
      </div>
    </motion.section>
  );
}
```

**Tailwind rules:** No ml-/mr-/pl-/pr- — use px-6 (symmetric) or ps-/pe- for asymmetric inline spacing. text-center is fine (not direction-specific). flex-col items-center is layout-direction-neutral.

**Do NOT add another MotionConfig** — it already exists at AppProviders level (Phase 3 decision).
  </action>
  <verify>npx tsc --noEmit runs from /Users/mohamedkhair/Coding/lumiere-beaute with zero errors</verify>
  <done>HeroSection.tsx exists, exports HeroSection, uses useScroll+useTransform for parallax, renders TypewriterText headline, subtitle, and two Link-wrapped Buttons using t() keys, compiles with zero TypeScript errors</done>
</task>

<task type="auto">
  <name>Task 2: Build StatsSection with useInView count-up animation</name>
  <files>src/components/sections/StatsSection.tsx</files>
  <action>
Create src/components/sections/StatsSection.tsx with an inner StatCounter component and the exported StatsSection.

**Imports:**
```typescript
import { useInView, animate } from 'framer-motion';
import { useRef, useEffect, useState } from 'react';
import { useTranslation } from 'react-i18next';
import type { StatItem } from '../../types/content';
import { FadeInSection } from '../animations/FadeInSection';
import { StaggerContainer, staggerItemVariants } from '../animations/StaggerContainer';
import { motion } from 'framer-motion';
import { Heading, BodyText } from '../ui/Typography';
```

**StatCounter inner component (not exported — internal to this file):**
- Props: `{ target: number; suffix: string; label: string }`
- `const ref = useRef<HTMLDivElement>(null)` — typed HTMLDivElement
- `const isInView = useInView(ref, { once: true, amount: 0.5 })` — fires exactly once when 50% visible
- `const [display, setDisplay] = useState(0)`
- `useEffect` deps: `[isInView, target]` — only runs when isInView flips to true
- Inside effect: `const controls = animate(0, target, { duration: 2, ease: [0.22, 1, 0.36, 1] as [number, number, number, number], onUpdate: (latest) => setDisplay(Math.round(latest)) })` — the `[number,number,number,number]` cast is REQUIRED for framer-motion v12 TypeScript strictness (see Phase 2 decision)
- `return () => controls.stop()` — cleanup prevents state update after unmount
- Render: `<div ref={ref}> <span>{display}{suffix}</span> <span>{label}</span> </div>`

**StatsSection exported component:**
- `const { t } = useTranslation('common')`
- `const stats = t('home.stats', { returnObjects: true }) as StatItem[]` — always cast, never use as unknown type (Pitfall 4 from research)
- Render a FadeInSection wrapping the section
- Inside: a heading using `t('home.stats_heading')` via Heading level={2}
- StaggerContainer for the 3 stat cards — each as a `motion.div variants={staggerItemVariants}` wrapping a StatCounter

**Styling:** Use logical properties. The three stats display in a responsive row: `grid grid-cols-1 sm:grid-cols-3 gap-8`. Each stat: value in large display text (`font-display text-5xl md:text-6xl text-stormy-teal-950 dark:text-celadon-100`), label in body text (`font-body text-sm text-jungle-teal-700 dark:text-mint-leaf-300`).

**NOTE on useInView + once: true:** `useInView` with `once: true` transitions `isInView` from false → true exactly once. When language switches, `isInView` stays true — so the `useEffect` only re-runs if `target` changes (which it does NOT on language switch since values are numbers). Counters will NOT reset on language switch. This is correct behavior.
  </action>
  <verify>npx tsc --noEmit runs from /Users/mohamedkhair/Coding/lumiere-beaute with zero errors</verify>
  <done>StatsSection.tsx exists, exports StatsSection, inner StatCounter uses useInView(once:true) + imperative animate(0, target) for count-up, casts ease as [number,number,number,number] tuple, reads stats from t('home.stats', { returnObjects: true }) as StatItem[], compiles with zero TypeScript errors</done>
</task>

</tasks>

<verification>
- src/components/sections/HeroSection.tsx exists and exports HeroSection
- src/components/sections/StatsSection.tsx exists and exports StatsSection
- Neither file imports from 'motion/react' (grep: `import.*from.*motion/react` returns empty)
- Both files use logical Tailwind properties only (grep: `\b(ml-|mr-|pl-|pr-)` returns empty in these files)
- npx tsc --noEmit exits with code 0
</verification>

<success_criteria>
Hero and Stats sections exist as isolated components in src/components/sections/, both compile cleanly, use correct framer-motion import paths, and are ready to be composed into HomePage.tsx in Plan 04.
</success_criteria>

<output>
After completion, create `.planning/phases/04-homepage-and-services/04-02-SUMMARY.md`
</output>
