---
phase: 05-academy-and-contact
plan: "02"
type: execute
wave: 2
depends_on: ["05-01"]
files_modified:
  - src/components/sections/CoursesSection.tsx
  - src/pages/AcademyPage.tsx
autonomous: true
requirements: [ACAD-01, ACAD-02]

must_haves:
  truths:
    - "Academy page displays 2 course cards each showing title, description, duration, and price"
    - "Each course card has an Enroll via WhatsApp CTA that opens wa.me with a pre-filled message in the correct language"
    - "Each course card also has a Book a Consultation CTA that navigates to /contact via React Router Link (not <a href>)"
    - "The Academy page uses the locked page transition pattern (motion.div + pageTransitionVariants + custom={dir})"
  artifacts:
    - path: "src/components/sections/CoursesSection.tsx"
      provides: "Grid of 2 course cards with enroll and contact CTAs"
      exports: ["CoursesSection"]
      min_lines: 50
    - path: "src/pages/AcademyPage.tsx"
      provides: "Academy page composition replacing Phase 2 stub"
      exports: ["AcademyPage"]
  key_links:
    - from: "src/components/sections/CoursesSection.tsx"
      to: "src/i18n/locales/en/common.json"
      via: "t('academy.courses', { returnObjects: true }) as Course[]"
      pattern: "academy\\.courses"
    - from: "src/components/sections/CoursesSection.tsx"
      to: "src/components/ui/Button.tsx"
      via: "Button as='a' target='_blank' rel='noopener noreferrer'"
      pattern: "target.*_blank"
    - from: "src/pages/AcademyPage.tsx"
      to: "src/components/sections/CoursesSection.tsx"
      via: "import and render CoursesSection inside motion.div"
      pattern: "CoursesSection"
---

<objective>
Build the Academy page: a CoursesSection component displaying 2 certification courses with enroll (WhatsApp) and contact CTAs, then compose AcademyPage replacing the Phase 2 stub.

Purpose: Delivers ACAD-01 (2 course cards with full details) and ACAD-02 (enroll button opening WhatsApp or navigating to contact) using the established Phase 4 card + section patterns.
Output: src/components/sections/CoursesSection.tsx and updated src/pages/AcademyPage.tsx.
</objective>

<execution_context>
@/Users/mohamedkhair/.claude/get-shit-done/workflows/execute-plan.md
@/Users/mohamedkhair/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/05-academy-and-contact/05-RESEARCH.md
@.planning/phases/05-academy-and-contact/05-01-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Build CoursesSection with WhatsApp enroll and Contact link CTAs</name>
  <files>src/components/sections/CoursesSection.tsx</files>
  <action>
    Create `src/components/sections/CoursesSection.tsx`. Model structure on AcademyTeaserSection.tsx but with richer course cards from locale data.

    Pattern source: AcademyTeaserSection.tsx (homepage teaser), TreatmentGrid.tsx (card grid), both in src/components/sections/.

    ```typescript
    import { motion } from 'framer-motion';
    import { useTranslation } from 'react-i18next';
    import { Link } from 'react-router-dom';
    import type { Course } from '../../types/content';
    import { FadeInSection } from '../animations/FadeInSection';
    import { StaggerContainer, staggerItemVariants } from '../animations/StaggerContainer';
    import { Card } from '../ui/Card';
    import { Heading, BodyText } from '../ui/Typography';
    import { Button } from '../ui/Button';

    /**
     * CoursesSection — Academy page section displaying 2 certification courses.
     *
     * Each course card shows: title, description, duration, price, and two CTAs:
     * 1. "Enroll via WhatsApp" — opens wa.me in a new tab with pre-filled message
     * 2. "Book a Consultation" — React Router Link to /contact (NOT <a href>)
     *
     * WhatsApp phone from VITE_WHATSAPP_NUMBER env var (digits only, no + prefix).
     * Message pre-filled from t('academy.enroll_cta') + course title for context.
     *
     * CRITICAL: Internal /contact navigation uses <Link to="/contact"> to preserve
     * AnimatePresence exit animation (locked decision from 04-03).
     */

    function buildWhatsAppURL(phone: string, message: string): string {
      return `https://wa.me/${phone}?text=${encodeURIComponent(message)}`;
    }

    export function CoursesSection() {
      const { t } = useTranslation('common');
      const courses = t('academy.courses', { returnObjects: true }) as Course[];
      const phone = import.meta.env.VITE_WHATSAPP_NUMBER ?? '905XXXXXXXXX';

      return (
        <section className="py-20 px-6">
          <FadeInSection className="text-center mb-4">
            <Heading level={2}>{t('academy.courses_heading')}</Heading>
          </FadeInSection>

          <StaggerContainer className="grid grid-cols-1 lg:grid-cols-2 gap-8 mt-10 max-w-5xl mx-auto">
            {courses.map((course) => {
              const whatsappMessage = `${t('academy.enroll_cta')}: ${course.title}`;
              return (
                <motion.div key={course.id} variants={staggerItemVariants}>
                  <Card hasPlaceholder placeholderVariant="card" className="h-full flex flex-col">
                    <Heading level={3}>{course.title}</Heading>
                    <BodyText size="sm" className="mt-3 flex-1 text-jungle-teal-700 dark:text-mint-leaf-400">
                      {course.description}
                    </BodyText>
                    <div className="mt-4 flex flex-wrap gap-4 text-sm font-body text-seagrass-600 dark:text-seagrass-400">
                      <span>{course.duration}</span>
                      <span className="font-medium text-stormy-teal-950 dark:text-celadon-100">{course.price}</span>
                    </div>
                    <div className="mt-6 flex flex-wrap gap-3">
                      <Button
                        as="a"
                        variant="primary"
                        href={buildWhatsAppURL(phone, whatsappMessage)}
                        target="_blank"
                        rel="noopener noreferrer"
                      >
                        {t('academy.enroll_cta')}
                      </Button>
                      <Link to="/contact">
                        <Button variant="ghost">{t('academy.contact_cta')}</Button>
                      </Link>
                    </div>
                  </Card>
                </motion.div>
              );
            })}
          </StaggerContainer>
        </section>
      );
    }
    ```

    Color tokens used (`jungle-teal-700`, `mint-leaf-400`, `seagrass-600`, `seagrass-400`, `stormy-teal-950`, `celadon-100`) are all defined in the @theme block in src/styles/globals.css — verified from 04-06 audit. Do NOT use `seagrass-*` token variants that are not in the palette.
  </action>
  <verify>Run `npx tsc --noEmit` — zero errors. CoursesSection.tsx exists at correct path. Verify `import { Course } from '../../types/content'` resolves without error. Confirm two CTA buttons exist: one `as="a"` with WhatsApp href and one `<Link to="/contact">`.</verify>
  <done>CoursesSection.tsx exists, exports CoursesSection, imports Course type, maps over academy.courses, renders duration and price, has WhatsApp Button (as="a", target="_blank") and Contact Link. Zero TypeScript errors.</done>
</task>

<task type="auto">
  <name>Task 2: Replace AcademyPage stub with full page composition</name>
  <files>src/pages/AcademyPage.tsx</files>
  <action>
    Replace the Phase 2 stub entirely. AcademyPage is a pure composition — motion.div wrapper + main + CoursesSection. Pattern mirrors HomePage.tsx (locked decision: page = pure composition, all content in section components).

    ```typescript
    import { motion } from 'framer-motion';
    import { useTranslation } from 'react-i18next';
    import { useDirection } from '../hooks/useDirection';
    import { pageTransitionVariants } from '../animations/variants';
    import { FadeInSection } from '../components/animations/FadeInSection';
    import { Heading, BodyText } from '../components/ui/Typography';
    import { CoursesSection } from '../components/sections/CoursesSection';

    export function AcademyPage() {
      const { t } = useTranslation('common');
      const { dir } = useDirection();

      return (
        <motion.div
          custom={dir}
          variants={pageTransitionVariants}
          initial="initial"
          animate="animate"
          exit="exit"
        >
          <main>
            {/* Hero */}
            <section className="py-24 px-6 bg-stormy-teal-950 dark:bg-stormy-teal-950">
              <FadeInSection className="text-center max-w-3xl mx-auto">
                <Heading level={1} className="text-celadon-100">
                  {t('academy.hero.headline')}
                </Heading>
                <BodyText className="mt-4 text-mint-leaf-300">
                  {t('academy.hero.subtitle')}
                </BodyText>
              </FadeInSection>
            </section>

            {/* Courses */}
            <CoursesSection />
          </main>
        </motion.div>
      );
    }
    ```

    CRITICAL: hero section background uses `bg-stormy-teal-950` (confirmed @theme token). Text is `text-celadon-100` (white on dark bg — same pattern as hero section in 04-06). Remove the Phase 2 stub text entirely.

    NOTE on `min-h-screen`: The Phase 2 stub had `min-h-screen px-4 py-16` on the motion.div wrapper. Remove this. The page content provides its own height via sections. The motion.div wrapper should have no padding/height constraints — locked pattern from 04-04 (HomePage composition).
  </action>
  <verify>Run `npx tsc --noEmit` — zero errors. Navigate to /academy in dev server — page renders (not the Phase 2 stub text "Phase 2 stub — content coming in Phase 4"). Two course cards visible with title, description, duration, price, and two buttons each.</verify>
  <done>AcademyPage.tsx replaced: motion.div + pageTransitionVariants + custom={dir} + hero section + CoursesSection. No Phase 2 stub text remains. Two course cards render with full details and both CTAs. Zero TypeScript errors.</done>
</task>

</tasks>

<verification>
Run `npx tsc --noEmit` — zero errors.
Start dev server (`npm run dev`) and navigate to /academy.
Verify: 2 course cards visible, each showing title, description, duration, price, "Enroll via WhatsApp" button (links to wa.me), "Book a Consultation" button (navigates to /contact with AnimatePresence transition).
Verify: Switching to Arabic — course titles in Arabic, duration in Arabic-Indic numerals.
</verification>

<success_criteria>
Academy page is fully functional: hero section, 2 course cards with all fields, WhatsApp enroll CTA (external link, new tab), Contact CTA (React Router Link). Works in all three languages. Satisfies ACAD-01 and ACAD-02.
</success_criteria>

<output>
After completion, create `.planning/phases/05-academy-and-contact/05-02-SUMMARY.md`
</output>
