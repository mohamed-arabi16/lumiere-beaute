---
phase: 06-content-and-qa
plan: 04
type: execute
wave: 3
depends_on:
  - 06-01
  - 06-02
  - 06-03
autonomous: false
requirements:
  - FNDTN-03
  - FNDTN-04
files_modified: []

user_setup:
  - service: emailjs
    why: "EmailJS account, service, and email template must be created to enable form-to-inbox delivery"
    env_vars:
      - name: VITE_EMAILJS_SERVICE_ID
        source: "EmailJS Dashboard (emailjs.com) → Email Services → your service → Service ID"
      - name: VITE_EMAILJS_TEMPLATE_ID
        source: "EmailJS Dashboard → Email Templates → your template → Template ID"
      - name: VITE_EMAILJS_PUBLIC_KEY
        source: "EmailJS Dashboard → Account → API Keys → Public Key"
    dashboard_config:
      - task: "Create EmailJS account at emailjs.com"
        location: "emailjs.com → Sign Up"
      - task: "Add an Email Service (Gmail recommended for testing)"
        location: "EmailJS Dashboard → Email Services → Add New Service"
      - task: "Create Email Template with these exact variables: {{from_name}}, {{from_email}}, {{phone}}, {{service}}, {{message}}"
        location: "EmailJS Dashboard → Email Templates → Create New Template"
      - task: "Set template 'To Email' to the salon's actual inbox address (client fills this in)"
        location: "EmailJS Dashboard → Email Templates → your template → Settings → To Email"
      - task: "Add env vars to Vercel: VITE_EMAILJS_SERVICE_ID, VITE_EMAILJS_TEMPLATE_ID, VITE_EMAILJS_PUBLIC_KEY"
        location: "Vercel Dashboard → Project → Settings → Environment Variables"
      - task: "Add VITE_WHATSAPP_NUMBER in E.164 format (digits only, no +) to Vercel env vars"
        location: "Vercel Dashboard → Project → Settings → Environment Variables"

must_haves:
  truths:
    - "Submitting the contact form with real EmailJS credentials delivers an email to the configured inbox"
    - "The email received contains all five fields: name, email, phone, service, message"
    - "Visiting the site in Turkish and Arabic shows zero raw translation keys on any page"
    - "Switching to Arabic and navigating through all five pages shows correct RTL mirroring in the browser"
    - "All Playwright RTL snapshot tests pass"
    - "All text meets WCAG AA contrast ratio: body text 4.5:1, large text 3:1, verified in both light and dark mode."
  artifacts:
    - path: ".env.example"
      provides: "EmailJS setup instructions for future reference"
    - path: "tests/rtl-snapshots/"
      provides: "Baseline snapshot PNGs committed and passing in CI"
  key_links:
    - from: "Vercel env vars"
      to: "import.meta.env.VITE_EMAILJS_*"
      via: "Vite VITE_ prefix injection at build time"
      pattern: "VITE_EMAILJS_SERVICE_ID"
---

<objective>
Human-verify Phase 6 completion: EmailJS form delivers real email with all five fields, RTL layout is correct across all pages, and all Playwright snapshot tests pass. Gate: everything must be confirmed before Phase 6 is closed.

Purpose: The previous three plans automated everything possible. This plan is the mandatory human checkpoint to verify the EmailJS integration (which requires external dashboard setup that Claude cannot do) and to give the client a final live walkthrough of the site in all three languages.

Output: Phase 6 complete — trilingual content verified, RTL confirmed, Lighthouse ≥ 75, EmailJS delivering emails.
</objective>

<execution_context>
@/Users/mohamedkhair/.claude/get-shit-done/workflows/execute-plan.md
@/Users/mohamedkhair/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/06-content-and-qa/06-CONTEXT.md
@.planning/phases/06-content-and-qa/06-03-SUMMARY.md
</context>

<tasks>

<task type="checkpoint:human-action" gate="blocking">
  <name>Task 1: EmailJS setup, RTL walkthrough, and Playwright snapshot verification</name>
  <action>Human-required external service setup and verification — see how-to-verify steps below.</action>
  <verify>All verification steps in how-to-verify must pass before resuming.</verify>
  <done>EmailJS delivers 5-field email, RTL confirmed on all 5 pages, Playwright tests pass, no raw translation keys visible.</done>
  <what-built>
    Plans 06-01 through 06-03 completed:
    - Contact form updated with phone field (5 fields total)
    - AboutPage stub replaced with translated coming-soon text
    - All three locale JSONs verified complete (58 keys each, no gaps)
    - .env.example documents all 4 VITE_ env vars
    - Playwright installed with 5 RTL spec files + CI workflow
    - Lighthouse audits run — scores recorded in 06-03-SUMMARY.md
  </what-built>
  <how-to-verify>
    You must complete the following steps that require external service access:

    **Step 1 — EmailJS Account Setup**
    1. Go to emailjs.com and create an account (or log in if one exists)
    2. Add an Email Service — Gmail is easiest: Email Services → Add New Service → Gmail → Connect Account
    3. Create an Email Template:
       - Go to Email Templates → Create New Template
       - Set Subject: `New Inquiry from {{from_name}}`
       - Set Body (plain text or HTML):
         ```
         New inquiry received from Lumière Beauté website:

         Name: {{from_name}}
         Email: {{from_email}}
         Phone: {{phone}}
         Service of Interest: {{service}}

         Message:
         {{message}}
         ```
       - Set To Email: [the salon's actual inbox — use a real address you can access for testing]
       - Save the template and note the Template ID

    **Step 2 — Copy credentials**
    - Service ID: EmailJS Dashboard → Email Services → your service
    - Template ID: EmailJS Dashboard → Email Templates → your template
    - Public Key: EmailJS Dashboard → Account → General → API Keys → Public Key

    **Step 3 — Test locally**
    Create `.env.local` at project root (this file is gitignored):
    ```
    VITE_EMAILJS_SERVICE_ID=your_actual_service_id
    VITE_EMAILJS_TEMPLATE_ID=your_actual_template_id
    VITE_EMAILJS_PUBLIC_KEY=your_actual_public_key
    VITE_WHATSAPP_NUMBER=905XXXXXXXXX
    ```
    Run `npm run dev` and visit http://localhost:5173/contact
    Fill out the form with all 5 fields and submit. Check the inbox — you should receive the email.

    **Step 4 — Add env vars to Vercel**
    In Vercel Dashboard → your project → Settings → Environment Variables, add all four VITE_ vars with real values. Then redeploy (or push a commit to trigger auto-deploy).

    **Step 5 — Verify RTL layout in browser**
    Open the live site (or localhost). Click the "ع" button in the navbar to switch to Arabic.
    Navigate through: Home → Services → Academy → Contact → About
    Verify for each page:
    - Text is right-to-left
    - Navbar links are on the right side (flipped)
    - Cards stack correctly in RTL
    - Animations slide from the correct direction (right-to-left entrance = starts from left for RTL)

    **Step 6 — Check for raw translation keys**
    In Arabic and Turkish modes, scan all five pages for any visible text that looks like a JSON key (e.g., "contact.form.phone_label" instead of a real translated string). If any raw key appears, report it.

    **Step 7 — Run Playwright tests**
    ```bash
    npx playwright test
    ```
    All tests must pass. If any fail due to font rendering differences (Linux vs macOS baseline), update snapshots:
    ```bash
    npx playwright test --update-snapshots
    ```
    Then commit the updated baseline PNGs.

    **Step 8 — Verify WCAG AA contrast (body text and large text)**
    Open https://webaim.org/resources/contrastchecker/ and verify the following color pairs:

    Light mode body text:
    - Foreground: `#0f2b2e` (stormy-teal-950) / Background: `#f0faf9` (celadon-50)
    - Required ratio: ≥ 4.5:1 (body text)

    Dark mode body text:
    - Foreground: `#e2f5f3` (celadon-100) / Background: `#0f2b2e` (stormy-teal-950)
    - Required ratio: ≥ 4.5:1 (body text)

    Large text (headings ≥ 18pt / 24px, or bold ≥ 14pt / 18.67px bold):
    - Required ratio: ≥ 3:1

    All four checks must pass before approving this step. If any pair fails, report the failing pair and measured ratio.
  </how-to-verify>
  <resume-signal>
    Type "approved" if all steps complete successfully.
    Or describe any issues found — e.g., "EmailJS not delivering", "RTL broken on Services page", "Playwright test X failing".
  </resume-signal>
</task>

</tasks>

<verification>
Human verification is the final gate. Phase 6 is complete when:
1. EmailJS form submission delivers email with all 5 fields to configured inbox
2. Arabic RTL layout is correct on all 5 pages (visual confirmation)
3. Zero raw translation keys visible in Turkish or Arabic mode
4. All Playwright RTL snapshot tests pass
5. Lighthouse scores ≥ 75 on all 5 pages (from 06-03-SUMMARY.md)
6. WCAG AA contrast verified via WebAIM Contrast Checker: stormy-teal-950/celadon-50 pair ≥ 4.5:1 (light mode body), celadon-100/stormy-teal-950 pair ≥ 4.5:1 (dark mode body), large text pairs ≥ 3:1
</verification>

<success_criteria>
- Real email received in inbox after form submission with all 5 fields: name, email, phone, service, message
- RTL layout visually confirmed correct on all 5 pages in Arabic mode
- Zero raw i18n keys visible in any language
- npx playwright test passes (all 12 RTL snapshot tests)
- Vercel deployment has all four VITE_ env vars configured
- WCAG AA contrast confirmed: body text ≥ 4.5:1 and large text ≥ 3:1 for both light and dark mode key color pairs
- Phase 6 Content and QA complete — ready to move to Phase 7 Polish and UX (or declare v1 complete)
</success_criteria>

<output>
After completion, create `.planning/phases/06-content-and-qa/06-04-SUMMARY.md`
</output>
