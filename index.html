<!doctype html>
<html lang="tr">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- BLOCKING: runs synchronously before CSS paints to prevent FOUC -->
    <!-- Must be FIRST in <head> before any stylesheet link -->
    <script>
      (function() {
        // Light mode is the default — only switch to dark if the user
        // has explicitly toggled it (saved === 'dark' in localStorage).
        // System preference is intentionally ignored.
        var saved = localStorage.getItem('theme');
        if (saved === 'dark') {
          document.documentElement.classList.add('dark');
        }

        // Restore language + direction from localStorage; fallback to Turkish
        var lang = localStorage.getItem('i18nextLng') || 'tr';
        var supported = ['tr', 'en', 'ar'];
        // Normalize locale variants like 'ar-SA' → 'ar', 'en-US' → 'en'
        if (supported.indexOf(lang) === -1) {
          var base = lang.split('-')[0];
          lang = supported.indexOf(base) !== -1 ? base : 'tr';
        }
        document.documentElement.lang = lang;
        document.documentElement.dir = (lang === 'ar') ? 'rtl' : 'ltr';
      })();
    </script>

    <!-- Preload LCP image: hero background loads immediately, not after CSS parse -->
    <link rel="preload" as="image" href="/hero-bg.jpg" fetchpriority="high" />

    <!-- Google Fonts: preconnect for performance, then font stylesheet -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <!--
      Non-render-blocking font loading via media="print" trick:
      Browser downloads font CSS asynchronously (print media won't block rendering).
      onload switches media to "all" so fonts apply once the stylesheet is ready.
      noscript fallback ensures fonts load normally without JavaScript.
    -->
    <link
      href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=Cairo:wght@400;600&family=Cormorant+Garamond:ital,wght@0,400;0,600;1,400&family=Inter:wght@400;500&display=swap"
      rel="stylesheet"
      media="print"
      onload="this.media='all'"
    />
    <noscript>
      <link
        href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=Cairo:wght@400;600&family=Cormorant+Garamond:ital,wght@0,400;0,600;1,400&family=Inter:wght@400;500&display=swap"
        rel="stylesheet"
      />
    </noscript>

    <title>Lumiere Beaute</title>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
